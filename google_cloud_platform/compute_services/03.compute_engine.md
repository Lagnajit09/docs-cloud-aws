# ðŸ“„ compute_engine.md

## Google Compute Engine â€” Complete Beginner Guide

## 1. What is Compute Engine?

**Compute Engine** is the virtual machine (VM) service of **Google Cloud Platform**.

It allows you to create and run **virtual servers** on Googleâ€™s global infrastructure with **full control over the operating system and runtime**.

Think of Compute Engine as:

> â€œRenting a powerful computer in Googleâ€™s data center, configurable exactly the way you want.â€

---

## 2. What is a Virtual Machine (VM)?

A **Virtual Machine (VM)** is a **software-based computer** that behaves like a physical machine.

A VM has:

- CPU
- Memory (RAM)
- Disk (storage)
- Network interface
- Operating System

```mermaid
graph TD
    VM[Virtual Machine]
    VM --> CPU
    VM --> RAM
    VM --> Disk
    VM --> OS[Operating System]
    VM --> NIC[Network Interface]
```

Multiple VMs can run on the same physical server, fully isolated from each other.

---

## 3. Why Use Compute Engine?

You choose Compute Engine when you need:

- Full OS-level control
- SSH / RDP access
- Custom software installation
- Predictable performance
- Legacy or monolithic applications

Typical use cases:

- Web servers
- Application servers
- Databases (self-managed)
- Dev/Test environments
- Lift-and-shift migrations

---

## 4. Core Architecture of Compute Engine

```mermaid
graph TD
    User --> SSH[SSH / RDP]
    SSH --> VM[Compute Engine VM]

    VM --> Disk[Persistent Disk]
    VM --> VPC[VPC Network]
    VPC --> Firewall[Firewall Rules]
    VM --> IP[Internal / External IP]
```

A VM does **not exist alone**. It is always attached to:

- A **zone**
- A **VPC network**
- One or more **disks**
- Firewall rules

---

## 5. Regions and Zones (Very Important)

### Region

A **region** is a geographical location:

- asia-south1
- us-central1
- europe-west1

### Zone

A **zone** is an isolated deployment area inside a region:

- asia-south1-a
- asia-south1-b

```mermaid
graph TD
    Region --> ZoneA
    Region --> ZoneB
    ZoneA --> VM1
    ZoneB --> VM2
```

**Key rule:**
A VM always lives in **one zone**.

---

## 6. Components of a Compute Engine VM

Letâ€™s break down **every component** of a VM.

---

### 6.1 Machine Type (CPU + Memory)

This defines **how powerful** your VM is.

Examples:

- e2-micro
- e2-medium
- n2-standard-4

```mermaid
graph LR
    MachineType --> vCPU
    MachineType --> Memory[RAM]
```

#### Types of machine families:

- **E2** â€“ Cost-optimized, general workloads
- **N2** â€“ Balanced performance
- **C2** â€“ Compute-intensive
- **M** â€“ Memory-optimized

Beginner rule:

> Start with **E2** unless you have special needs.

---

### 6.2 Boot Disk (Operating System)

The **boot disk** contains the OS.

Common OS images:

- Ubuntu
- Debian
- CentOS
- RHEL
- Windows Server

```mermaid
graph TD
    BootDisk --> OS
    OS --> VM
```

Options you choose:

- OS type
- Disk size
- Disk type

---

### 6.3 Persistent Disks (Storage)

Persistent Disks are **network-attached disks**.

Types:

- Standard (HDD)
- Balanced SSD
- SSD (high performance)

```mermaid
graph TD
    VM --> Disk1[Boot Disk]
    VM --> Disk2[Data Disk]
```

Important properties:

- Data persists even if VM stops
- Can be resized
- Can be attached/detached

---

### 6.4 Networking (VPC, IPs, NIC)

Each VM connects to a **VPC network** via a **network interface (NIC)**.

```mermaid
graph TD
    VM --> NIC
    NIC --> VPC
    VPC --> Subnet
```

#### IP Types

- **Internal IP** â€“ Used inside the VPC
- **External IP** â€“ Used to access from the internet

External IPs can be:

- Ephemeral (changes)
- Static (reserved)

---

### 6.5 Firewall Rules

Firewall rules control **allowed traffic**.

They are:

- Defined at VPC level
- Applied using **tags or service accounts**

```mermaid
graph TD
    Internet --> Firewall
    Firewall --> VM
```

Example:

- Allow TCP:22 â†’ SSH
- Allow TCP:80 â†’ HTTP

---

### 6.6 Service Account & IAM

A VM can have a **service account** attached.

Purpose:

- Allow VM to access GCP services securely

```mermaid
graph TD
    VM --> ServiceAccount
    ServiceAccount --> IAM
    IAM --> GCS[Cloud Storage]
```

Never hardcode credentials inside a VM.

---

### 6.7 Metadata & Startup Scripts

Metadata lets you configure VM behavior.

Common uses:

- Startup scripts
- Configuration flags
- Environment variables

```mermaid
graph TD
    Startup --> Script
    Script --> VM
```

Example:

- Install Nginx on first boot
- Configure application automatically

---

## 7. How to Create a VM (Conceptual Flow)

```mermaid
graph TD
    Start --> ChooseZone
    ChooseZone --> SelectMachine
    SelectMachine --> ChooseOS
    ChooseOS --> ConfigureDisk
    ConfigureDisk --> ConfigureNetwork
    ConfigureNetwork --> IAMSetup
    IAMSetup --> CreateVM
```

---

## 8. VM Creation Options (Explained Simply)

When creating a VM, you choose:

### 1. Name

Logical identifier for the VM.

### 2. Region & Zone

Determines:

- Latency
- Availability
- Cost

### 3. Machine Configuration

- Machine family
- vCPU count
- Memory

### 4. Boot Disk

- OS image
- Disk type
- Disk size

### 5. Identity & API Access

- Service account
- Access scopes

### 6. Networking

- VPC
- Subnet
- External IP

### 7. Firewall

- Allow HTTP/HTTPS
- Custom rules

### 8. Advanced Options

- Startup scripts
- Preemptibility
- Shielded VM
- Confidential VM

---

## 9. VM Lifecycle

```mermaid
graph TD
    Create --> Running
    Running --> Stop
    Stop --> Start
    Running --> Delete
```

Key behaviors:

- **Stop** â†’ disk persists
- **Delete** â†’ disk may be deleted (if configured)

---

## 10. VM Availability & Scaling

### Single VM

- Simple
- No high availability

### Managed Instance Group (MIG)

- Multiple identical VMs
- Autoscaling
- Self-healing

```mermaid
graph TD
    LB --> MIG
    MIG --> VM1
    MIG --> VM2
```

---

## 11. Pricing Basics (Conceptual)

You pay for:

- vCPU time
- Memory
- Disk storage
- Network egress

Billing is **per second** (with minimums).

---

## 12. When NOT to Use Compute Engine

Avoid Compute Engine if:

- You only need HTTP APIs â†’ Cloud Run
- You want zero ops â†’ App Engine
- You need event-driven logic â†’ Cloud Functions

---

## 13. Beginner Mental Model Summary

- Compute Engine = **maximum control**
- VM = **virtual computer**
- You manage **OS, patches, scaling**
- Best for **custom and legacy workloads**

---
